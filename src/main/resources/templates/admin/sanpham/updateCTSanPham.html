<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main.html}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Update Chi Tiết Sản Phẩm</title>
    <!-- CSS Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- JavaScript Bootstrap (với Popper.js) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOMvY6Z/HyUfhO8W2Kw5kFuWzwh4pL1RYU3dM/L3" crossorigin="anonymous">
</head>
<body>
<div layout:fragment="content">
    <div class="container">
        <span>
        <h1>Update Chi Tiết Sản Phẩm </h1>
            <a th:href="@{/sanpham/getIdsanpham/{idsp}(idsp=${idsp})}" class="btn btn-dark float-end"><i class="fas fa-arrow-left"></i></a>

        </span>
        <div >
            <img th:src="@{${detailCTSP.hinhAnh}}" alt="Hình ảnh sản phẩm" style="width: 200px; height: auto; box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.4);">
        </div>
        <br>
        <form th:action="@{/sanpham/updatectsanpham}" method="post" enctype="multipart/form-data">
            <input th:type="hidden" name="idsp" th:value="${idsp}" />
            <input th:type="hidden" name="idctsp" th:value="${detailCTSP.id}" />

            <div class="row mb-3">
                <div class="col-md-4 mb-3">
                    <label class="form-label">Tên sản phẩm</label>
                    <input th:type="text" class="form-control" style="text-align: center" th:value="${detailCTSP.tenSanPham}" name="idSanPham" readonly>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Hãng</label>
                    <select class="form-select" aria-label="Default select example" name="hang">
                        <option th:each="hang : ${comboxHang}" th:value="${hang.idhang}" th:selected="${detailCTSP.tenHang == hang.tenhang}" th:text="${hang.tenhang}"></option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Size</label>
                    <select class="form-select" aria-label="Default select example" name="size">
                        <option th:each="size : ${comboxSize}" th:value="${size.id}" th:selected="${detailCTSP.tenSize == size.ten}" th:text="${size.ten}"></option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Danh mục</label>
                    <select class="form-select" aria-label="Default select example" name="danhMuc">
                        <option th:each="danhMuc : ${comboxDanhMuc}" th:value="${danhMuc.id}" th:selected="${detailCTSP.tenDanhMuc == danhMuc.ten}" th:text="${danhMuc.ten}"></option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Chất liệu</label>
                    <select class="form-select" aria-label="Default select example" name="chatLieu">
                        <option th:each="chatLieu : ${comboxChatLieu}" th:value="${chatLieu.id}" th:selected="${detailCTSP.tenChatLieu == chatLieu.ten}" th:text="${chatLieu.ten}"></option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Màu sắc</label>
                    <select class="form-select" aria-label="Default select example" name="mauSac">
                        <option th:each="mauSac : ${comboxMauSac}" th:value="${mauSac.id}" th:selected="${detailCTSP.tenMauSac == mauSac.ten}" th:text="${mauSac.ten}"></option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Giá nhập</label>
                    <input th:type="text" class="form-control" name="giaNhap" th:value="${detailCTSP.giaNhap}">
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Giá bán</label>
                    <input th:type="text" class="form-control" name="giaBan" th:value="${detailCTSP.giaBan}">
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Thay đổi hình ảnh</label>
                    <input type="file" class="form-control" name="hinhAnh" accept="image/*">
                    <input type="hidden" name="currentHinhAnh" th:value="${detailCTSP.hinhAnh}">
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Số lượng</label>
                    <input th:type="text" class="form-control" name="soLuong" th:value="${detailCTSP.soLuong}">
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Mô tả</label>
                    <input th:type="text" class="form-control" name="moTa" th:value="${detailCTSP.moTa}">
                </div>
                <div class="col-md-4 mb-3">
                    <label>Trạng Thái:</label>
                    <div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="trangThai" value="1" checked required>
                            <label class="form-check-label">Hoạt động</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="trangThai" value="0">
                            <label class="form-check-label">Không hoạt động</label>
                        </div>
                    </div>
                </div>
            </div>
            <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
                <p th:text="${errorMessage}"></p>
            </div>
            <button th:type="submit" class="btn btn-primary">Update</button>
        </form>
        <div th:if="${successMessage}">
            <script th:inline="javascript">
                var successMessage = /*[[${successMessage}]]*/ 'null';
                if (successMessage !== 'null') {
                    Swal.fire({
                        icon: 'success',
                        title: 'Thành công',
                        text: successMessage,
                        confirmButtonText: 'OK'
                    }).then(() => {
                        history.replaceState(null, '', location.pathname);
                    });
                }
            </script>
        </div>
    </div>

</div>
</body>
</html>
