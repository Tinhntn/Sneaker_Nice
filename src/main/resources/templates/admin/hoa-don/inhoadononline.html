<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main.html}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>In H√≥a ƒê∆°n</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
<div layout:fragment="content">
    <!-- Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng -->
    <script th:if="${success != null}" th:inline="javascript">
        Swal.fire({
            icon: 'success',
            title: 'Th√†nh c√¥ng',
            text: '[[${success}]]',
            position: 'center',
            timer: 3000,
            timerProgressBar: true,
            showConfirmButton: false
        });
    </script>

    <!-- Hi·ªÉn th·ªã th√¥ng b√°o l·ªói -->
    <script th:if="${error != null}" th:inline="javascript">
        Swal.fire({
            icon: 'error',
            title: 'L·ªói!',
            text: '[[${error}]]',
            position: 'center',
            timer: 3000,
            timerProgressBar: true,
            showConfirmButton: false
        });
    </script>

    <div class="container">
        <div class="container mt-5">
            <div class="card shadow-lg p-4 mb-4">
                <h2 class="text-center mb-4">Th√¥ng Tin H√≥a ƒê∆°n</h2>

                <!-- Th√¥ng tin h√≥a ƒë∆°n (kh√¥ng d√πng b·∫£ng) -->
                <div class="mb-3">
                    <strong>M√£ H√≥a ƒê∆°n:</strong> <span th:text="${hoaDon.maHoaDon}"></span>
                </div>
                <div class="mb-3">
                    <strong>Nh√¢n Vi√™n B√°n:</strong>
                    <!--                    <span th:text="${hoaDon.nhanVien.tenNhanVien}"></span>-->
                </div>
                <div class="mb-3">
                    <strong>T·ªïng Ti·ªÅn:</strong> <span th:text="${hoaDon.thanhTien}"></span>
                </div>
                <div class="mb-3">
                    <strong>Tr·∫°ng Th√°i:</strong>
                    <span th:text="${hoaDon.trangThai == 1 ? 'ƒê√£ thanh to√°n' : 'Ch∆∞a thanh to√°n'}"></span>
                </div>


                <!-- B·∫£ng chi ti·∫øt h√≥a ƒë∆°n -->
                <table class="table table-bordered table-striped">
                    <thead class="thead-dark">
                    <tr>
                        <th scope="col">T√™n S·∫£n Ph·∫©m</th>
                        <th scope="col">S·ªë L∆∞·ª£ng</th>
                        <th scope="col">ƒê∆°n Gi√°</th>
                        <th scope="col">Th√†nh Ti·ªÅn</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- L·∫∑p qua danh s√°ch chi ti·∫øt h√≥a ƒë∆°n -->
                    <tr th:each="ct : ${hdct}">
                        <td th:text="${ct.idChiTietSanPham.idSanPham.tenSanPham}"></td> <!-- T√™n s·∫£n ph·∫©m -->
                        <td th:text="${ct.soLuong}"></td> <!-- S·ªë l∆∞·ª£ng -->
                        <td th:text="${ct.donGia}"></td> <!-- ƒê∆°n gi√° -->
                        <td th:text="${ct.soLuong * ct.donGia}"></td> <!-- Th√†nh ti·ªÅn (s·ªë l∆∞·ª£ng * ƒë∆°n gi√°) -->
                    </tr>
                    </tbody>
                </table>

                <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng -->
                <div class="d-flex justify-content-between mt-4">
                    <a href="/hoadononline/hienthi" class="btn btn-outline-secondary">
                        üîô Tr·ªü L·∫°i B√°n H√†ng
                    </a>
                    <a th:href="@{'/hoadononline/export/pdf/' + ${hoaDon.id}}"
                       class="btn btn-primary"
                       target="_blank">
                        üìÑ In H√≥a ƒê∆°n (PDF)
                    </a>
                </div>
            </div>
        </div>


    </div> <!-- K·∫øt th√∫c layout fragment -->
</div>

</body>
</html>
